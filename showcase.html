<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>@mikesaintsg/adapters Showcase</title>
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const a of d)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(d){const a={};return d.integrity&&(a.integrity=d.integrity),d.referrerPolicy&&(a.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?a.credentials="include":d.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(d){if(d.ep)return;d.ep=!0;const a=o(d);fetch(d.href,a)}})();class Q extends Error{code;cause;constructor(t,o,s){super(o),this.name="CoreError",this.code=t,this.cause=s}}class M extends Error{code;providerCode;retryAfter;context;cause;constructor(t,o,s,d){super(o),this.name="AdapterError",this.code=t,this.providerCode=s?.providerCode,this.retryAfter=s?.retryAfter,this.context=s?.context,this.cause=d}toData(){const t={code:this.code};return this.providerCode!==void 0&&(t.providerCode=this.providerCode),this.retryAfter!==void 0&&(t.retryAfter=this.retryAfter),this.context!==void 0&&(t.context=this.context),t}isRetryable(){return["RATE_LIMIT_ERROR","NETWORK_ERROR","TIMEOUT_ERROR","SERVICE_ERROR"].includes(this.code)}}function z(e){return e instanceof M}async function K(e){const o=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",o);return Array.from(new Uint8Array(s)).map(a=>a.toString(16).padStart(2,"0")).join("")}function U(){return{value:void 0,done:!0}}function G(e){const{onEvent:t,onError:o,onEnd:s}=e;let d="",a,i=[],E,h;function f(){if(i.length===0){c();return}const l=i.join(`
`);if(l==="[DONE]"){c();return}const y={data:l,...a!==void 0?{event:a}:{},...E!==void 0?{id:E}:{},...h!==void 0?{retry:h}:{}};t(y),c()}function c(){a=void 0,i=[],E=void 0,h=void 0}function p(l){if(l===""){f();return}if(l.startsWith(":"))return;const y=l.indexOf(":");if(y===-1)return;const R=l.slice(0,y);let w=l.slice(y+1);switch(w.startsWith(" ")&&(w=w.slice(1)),R){case"event":a=w;break;case"data":i.push(w);break;case"id":w.includes("\0")||(E=w);break;case"retry":{const N=parseInt(w,10);!isNaN(N)&&N>=0&&(h=N);break}}}function m(l){try{for(d+=l;;){const y=d.indexOf(`
`);if(y===-1)break;let R=d.slice(0,y);d=d.slice(y+1),R.endsWith("\r")&&(R=R.slice(0,-1)),p(R)}}catch(y){o&&y instanceof Error&&o(y)}}function g(){try{if(d.length>0){const l=d.endsWith("\r")?d.slice(0,-1):d;d="",p(l)}i.length>0&&f(),s?.()}catch(l){o&&l instanceof Error&&o(l)}}function v(){d="",c()}return{feed:m,end:g,reset:v}}const ce="gpt-4o",de="text-embedding-3-small",le=1536,Z="https://api.openai.com/v1",ue="claude-3-5-sonnet-20241022",pe="https://api.anthropic.com",me="2023-06-01",fe="voyage-2",ee=1024,Ee="https://api.voyageai.com/v1",te="http://localhost:11434",he="nomic-embed-text",ge=12e4,ye=768,ve=100,be=50,Re="mikesaintsg-sessions",Te="sessions",_e=10080*60*1e3;function Ae(e){let t=e?.requestsPerMinute;const o=e?.maxConcurrent,s=e?.windowMs;let d=0;const a=[],i=[];function E(){const y=Date.now()-s;for(;a.length>0;){const R=a[0];if(R!==void 0&&R<y)a.shift();else break}}function h(){return E(),d<o&&a.length<t}function f(){for(;i.length>0&&h();){const l=i.shift();l&&!l.resolved&&(l.resolved=!0,d++,a.push(Date.now()),l.resolve())}}function c(){if(E(),d>=o)return 10;if(a.length>=t){const l=a[0];if(l!==void 0){const y=Date.now(),R=l+s;return Math.max(0,R-y)}}return 0}async function p(){return new Promise(l=>{if(h())d++,a.push(Date.now()),l();else{const y={resolve:l,resolved:!1};i.push(y);const R=setInterval(()=>{h()&&i.length>0&&f(),y.resolved&&clearInterval(R)},c()||10)}})}function m(){d>0&&d--,f()}function g(){E();const l=Date.now();let y=s;if(a.length>0){const R=a[0];R!==void 0&&(y=Math.max(0,R+s-l))}return{activeRequests:d,maxConcurrent:o,requestsInWindow:a.length,requestsPerMinute:t,windowResetIn:y}}function v(l){l>0&&(t=l)}return{acquire:p,release:m,getState:g,setLimit:v}}const X={invalid_api_key:"AUTHENTICATION_ERROR",authentication_error:"AUTHENTICATION_ERROR",invalid_request_error:"INVALID_REQUEST_ERROR",rate_limit_error:"RATE_LIMIT_ERROR",rate_limit_exceeded:"RATE_LIMIT_ERROR",tokens_exceeded_error:"RATE_LIMIT_ERROR",insufficient_quota:"QUOTA_EXCEEDED_ERROR",billing_hard_limit_reached:"QUOTA_EXCEEDED_ERROR",context_length_exceeded:"CONTEXT_LENGTH_ERROR",model_not_found:"MODEL_NOT_FOUND_ERROR",content_policy_violation:"CONTENT_FILTER_ERROR",content_filter:"CONTENT_FILTER_ERROR",server_error:"SERVICE_ERROR",api_error:"SERVICE_ERROR",timeout:"TIMEOUT_ERROR"};function we(e,t){const s=t?.error,d=s?.message??`OpenAI API error: ${e.status}`,a=s?.code??s?.type;let i="UNKNOWN_ERROR";a&&X[a]?i=X[a]:i=J(e.status);const E=oe(e),h={context:{status:e.status,type:s?.type,param:s?.param}};return a!==void 0&&(h.providerCode=a),i==="RATE_LIMIT_ERROR"&&E!==void 0&&(h.retryAfter=E),new M(i,d,h)}const Y={authentication_error:"AUTHENTICATION_ERROR",invalid_api_key:"AUTHENTICATION_ERROR",permission_error:"AUTHENTICATION_ERROR",not_found_error:"MODEL_NOT_FOUND_ERROR",rate_limit_error:"RATE_LIMIT_ERROR",overloaded_error:"RATE_LIMIT_ERROR",invalid_request_error:"INVALID_REQUEST_ERROR",api_error:"SERVICE_ERROR"};function Oe(e,t){const s=t?.error,d=s?.message??`Anthropic API error: ${e.status}`,a=s?.type;let i="UNKNOWN_ERROR";a&&Y[a]?i=Y[a]:i=J(e.status);const E=oe(e),h={context:{status:e.status,errorType:s?.type}};return a!==void 0&&(h.providerCode=a),i==="RATE_LIMIT_ERROR"&&E!==void 0&&(h.retryAfter=E),new M(i,d,h)}const Se=[{pattern:/model.*not found/i,code:"MODEL_NOT_FOUND_ERROR"},{pattern:/model.*does not exist/i,code:"MODEL_NOT_FOUND_ERROR"},{pattern:/pull.*failed/i,code:"MODEL_NOT_FOUND_ERROR"},{pattern:/context length/i,code:"CONTEXT_LENGTH_ERROR"},{pattern:/context.*exceeded/i,code:"CONTEXT_LENGTH_ERROR"},{pattern:/timeout/i,code:"TIMEOUT_ERROR"},{pattern:/connection.*refused/i,code:"NETWORK_ERROR"},{pattern:/connection.*failed/i,code:"NETWORK_ERROR"},{pattern:/invalid.*request/i,code:"INVALID_REQUEST_ERROR"},{pattern:/bad.*request/i,code:"INVALID_REQUEST_ERROR"}];function re(e,t){const s=t?.error,d=s??`Ollama API error: ${e.status}`;let a=J(e.status);if(s){for(const{pattern:i,code:E}of Se)if(i.test(s)){a=E;break}}return new M(a,d,{context:{status:e.status}})}function B(e){const t=e.message;return t.includes("timeout")||t.includes("aborted")?new M("TIMEOUT_ERROR",t,void 0,e):e.name==="AbortError"?new M("TIMEOUT_ERROR","Request was aborted",void 0,e):new M("NETWORK_ERROR",t,void 0,e)}function J(e){switch(e){case 401:case 403:return"AUTHENTICATION_ERROR";case 429:return"RATE_LIMIT_ERROR";case 400:return"INVALID_REQUEST_ERROR";case 404:return"MODEL_NOT_FOUND_ERROR";case 500:case 502:case 503:case 504:return"SERVICE_ERROR";default:return"UNKNOWN_ERROR"}}function oe(e){const t=e.headers.get("Retry-After");if(!t)return;const o=parseInt(t,10);if(!isNaN(o))return o*1e3;const s=Date.parse(t);if(!isNaN(s))return Math.max(0,s-Date.now())}function ne(e){const{apiKey:t,model:o=de,baseURL:s=Z,dimensions:d=le}=e;if(!t)throw new Q("ADAPTER_ERROR","OpenAI API key is required");const a={provider:"openai",model:o,dimensions:d};return{async embed(i,E){if(i.length===0)return[];const h=`${s}/embeddings`,f={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({input:i,model:o,dimensions:d})};E?.signal&&(f.signal=E.signal);const c=await fetch(h,f);if(!c.ok){const g=await c.text().catch(()=>"Unknown error");throw new Q("ADAPTER_ERROR",`OpenAI API error (${c.status}): ${g}`)}return[...(await c.json()).data].sort((g,v)=>g.index-v.index).map(g=>new Float32Array(g.embedding))},getModelMetadata(){return a}}}const Ie={"voyage-3":1024,"voyage-3-lite":512,"voyage-code-3":1024,"voyage-finance-2":1024,"voyage-law-2":1024,"voyage-multilingual-2":1024,"voyage-2":ee,"voyage-code-2":1536};function Ne(e){const{apiKey:t,model:o=fe,baseURL:s=Ee,inputType:d}=e;if(!t)throw new M("AUTHENTICATION_ERROR","Voyage AI API key is required");const a=Ie[o]??ee,i={provider:"voyage",model:o,dimensions:a};return{async embed(E,h){if(E.length===0)return[];const f=`${s}/embeddings`,c={input:E,model:o};d&&(c.input_type=d);const p={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(c)};h?.signal&&(p.signal=h.signal);try{const m=await fetch(f,p);if(!m.ok){let l={};try{l=await m.json()}catch{}const y=typeof l=="object"&&l!==null?l.error?.message:void 0;let R;switch(m.status){case 401:case 403:R="AUTHENTICATION_ERROR";break;case 429:R="RATE_LIMIT_ERROR";break;case 400:R="INVALID_REQUEST_ERROR";break;case 500:case 502:case 503:R="SERVICE_ERROR";break;default:R="UNKNOWN_ERROR"}throw new M(R,y??`Voyage API error: ${m.status}`,{context:{status:m.status}})}return[...(await m.json()).data].sort((l,y)=>l.index-y.index).map(l=>new Float32Array(l.embedding))}catch(m){throw m instanceof Error&&m.name==="AbortError"?new M("TIMEOUT_ERROR","Request was aborted"):m instanceof TypeError?B(m):m instanceof M?m:new M("UNKNOWN_ERROR",m instanceof Error?m.message:"Unknown error",void 0,m instanceof Error?m:void 0)}},getModelMetadata(){return i}}}function Ce(e){const{model:t=he,baseURL:o=te,timeout:s=ge}=e,d={provider:"ollama",model:t,dimensions:ye};return{async embed(a,i){if(a.length===0)return[];const E=`${o}/api/embed`,h=new AbortController,f=setTimeout(()=>h.abort(),s);i?.signal&&i.signal.addEventListener("abort",()=>h.abort());try{const c=await fetch(E,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t,input:a}),signal:h.signal});if(clearTimeout(f),!c.ok){let m={};try{m=await c.json()}catch{}throw re(c,m)}return(await c.json()).embeddings.map(m=>new Float32Array(m))}catch(c){throw clearTimeout(f),c instanceof Error&&c.name==="AbortError"?new M("TIMEOUT_ERROR","Request timed out or was aborted"):c instanceof TypeError?B(c):c instanceof M?c:new M("UNKNOWN_ERROR",c instanceof Error?c.message:"Unknown error",void 0,c instanceof Error?c:void 0)}},getModelMetadata(){return d}}}function Me(e){const{adapter:t,batchSize:o=ve,delayMs:s=be,deduplicate:d=!0}=e,a=[];let i;async function E(){if(a.length===0)return;i!==void 0&&(clearTimeout(i),i=void 0);const c=a.splice(0,a.length),p=[],m=new Map;if(d)for(const g of c)m.has(g.hash)||(m.set(g.hash,p.length),p.push(g.text));else for(const g of c)m.set(`${p.length}-${g.hash}`,p.length),p.push(g.text);try{const g=await t.embed(p);for(const v of c){const l=d?v.hash:`${c.indexOf(v)}-${v.hash}`,y=m.get(d?v.hash:l);if(y!==void 0){const R=g[y];R!==void 0?v.resolve(R):v.reject(new Error("Embedding not found in response"))}}}catch(g){for(const v of c)v.reject(g instanceof Error?g:new Error("Unknown error"))}}function h(){i??=setTimeout(()=>{E()},s)}async function f(c){const p=await K(c);return new Promise((m,g)=>{a.push({text:c,hash:p,resolve:m,reject:g}),a.length>=o?E():h()})}return{async embed(c,p){if(c.length===0)return[];const m=c.map(g=>f(g));return Promise.all(m)},getModelMetadata(){return t.getModelMetadata()}}}function xe(e){const{adapter:t,cache:o,ttlMs:s}=e;function d(a){return Date.now()-a.cachedAt<s}return{async embed(a,i){const E=[],h=[],f=[];for(let c=0;c<a.length;c++){const p=a[c];if(p===void 0)continue;const m=await K(p),g=o.get(m);g&&d(g)?E[c]=g.embedding:(h.push(p),f.push(c))}if(h.length>0){const c=await t.embed(h,i);for(let p=0;p<c.length;p++){const m=c[p],g=h[p],v=f[p];if(m!==void 0&&g!==void 0&&v!==void 0){const l=await K(g);o.set(l,{embedding:m,cachedAt:Date.now()}),E[v]=m}}}return E},getModelMetadata(){return t.getModelMetadata()}}}function De(e){const t=e.apiKey,o=e.model??ce,s=e.baseURL??Z,d=e.organization;return{getId(){return`openai:${o}`},supportsTools(){return!0},supportsStreaming(){return!0},getCapabilities(){return{supportsStreaming:!0,supportsTools:!0,supportsVision:o.includes("vision")||o.includes("gpt-4o"),supportsFunctions:!0,models:[o]}},generate(a,i){const E=crypto.randomUUID(),h=new AbortController,f=new Set,c=new Set,p=new Set;let m,g;const v=[];let l,y=!1,R;const w=new Promise((n,u)=>{m=n,g=u}),N=a.map(n=>{const u=typeof n.content=="string"?n.content:null,A={role:n.role,content:u};return typeof n.content=="object"&&"type"in n.content&&n.content.type==="tool_calls"?{...A,role:"assistant",tool_calls:n.content.toolCalls.map(I=>({id:I.id,type:"function",function:{name:I.name,arguments:JSON.stringify(I.arguments)}}))}:typeof n.content=="object"&&"type"in n.content&&n.content.type==="tool_result"?{role:"tool",content:JSON.stringify(n.content.result),tool_call_id:n.content.callId}:A}),O={model:i.model??o,messages:N,stream:!0};i.temperature!==void 0&&(O.temperature=i.temperature),i.maxTokens!==void 0&&(O.max_tokens=i.maxTokens),i.topP!==void 0&&(O.top_p=i.topP),i.stop!==void 0&&(O.stop=i.stop),i.tools&&i.tools.length>0&&(O.tools=Pe(i.tools),i.toolChoice&&(O.tool_choice=$e(i.toolChoice))),P();async function P(){let n="";const u=new Map;let A="stop";try{let I=function(b){const T=b.choices[0];if(!T)return;const _=T.delta;if(_.content&&(n+=_.content,j(_.content)),_.tool_calls)for(const L of _.tool_calls)Le(L,u);T.finish_reason&&(A=ke(T.finish_reason))};const S={"Content-Type":"application/json",Authorization:`Bearer ${t}`};d&&(S["OpenAI-Organization"]=d);const C=await fetch(`${s}/chat/completions`,{method:"POST",headers:S,body:JSON.stringify(O),signal:h.signal});if(!C.ok){let b;try{b=await C.json()}catch{b={message:C.statusText}}const T=we(C,b);$(T);return}if(!C.body){$(B(new Error("No response body")));return}const k=C.body.getReader(),H=new TextDecoder,F=G({onEvent(b){if(b.data!=="[DONE]")try{const T=JSON.parse(b.data);I(T)}catch{}}});for(;;){const{done:b,value:T}=await k.read();if(b)break;const _=H.decode(T,{stream:!0});F.feed(_)}F.end();const D=[];for(const[,b]of u){let T={};try{const _=JSON.parse(b.arguments);_&&typeof _=="object"&&!Array.isArray(_)&&(T=_)}catch{}D.push({id:b.id,name:b.name,arguments:T})}q({text:n,toolCalls:D,finishReason:A,aborted:!1})}catch(I){if(I instanceof Error&&I.name==="AbortError"){q({text:n,toolCalls:[],finishReason:"stop",aborted:!0});return}$(B(I instanceof Error?I:new Error(String(I))))}}function j(n){for(const u of f)u(n);l?(l({value:n,done:!1}),l=void 0):v.push(n)}function q(n){y=!0,l&&l(U());for(const u of c)u(n);m?.(n)}function $(n){y=!0,R=n,l&&l(U());for(const u of p)u(n);g?.(n)}return{requestId:E,[Symbol.asyncIterator](){return{next(){return R?Promise.reject(R):v.length>0?Promise.resolve({value:v.shift(),done:!1}):y?Promise.resolve(U()):new Promise(n=>{l=n})}}},result(){return w},abort(){h.abort()},onToken(n){return f.add(n),()=>f.delete(n)},onComplete(n){return c.add(n),()=>c.delete(n)},onError(n){return p.add(n),()=>p.delete(n)}}}}}function Le(e,t){const o=e.index;let s=t.get(o);s||(s={id:e.id??"",name:e.function?.name??"",arguments:""},t.set(o,s)),e.id&&(s.id=e.id),e.function?.name&&(s.name=e.function.name),e.function?.arguments&&(s.arguments+=e.function.arguments)}function Pe(e){return e.map(t=>({type:"function",function:{name:t.name,description:t.description,parameters:t.parameters}}))}function $e(e){if(e)return typeof e=="string"?e:{type:"function",function:{name:e.name}}}function ke(e){switch(e){case"stop":return"stop";case"length":return"length";case"tool_calls":return"tool_calls";case"content_filter":return"content_filter";default:return"stop"}}function Ue(e){const t=e.apiKey,o=e.model??ue,s=e.baseURL??pe;return{getId(){return`anthropic:${o}`},supportsTools(){return!0},supportsStreaming(){return!0},getCapabilities(){return{supportsStreaming:!0,supportsTools:!0,supportsVision:!0,supportsFunctions:!0,models:[o]}},generate(d,a){const i=crypto.randomUUID(),E=new AbortController,h=new Set,f=new Set,c=new Set;let p,m;const g=[];let v,l=!1,y;const R=new Promise((n,u)=>{p=n,m=u});let w;const N=[];for(const n of d){if(n.role==="system"){w=typeof n.content=="string"?n.content:void 0;continue}if(n.role==="user")N.push({role:"user",content:typeof n.content=="string"?n.content:""});else if(n.role==="assistant")if(typeof n.content=="object"&&"type"in n.content&&n.content.type==="tool_calls"){const u=n.content.toolCalls.map(A=>({type:"tool_use",id:A.id,name:A.name,input:A.arguments}));N.push({role:"assistant",content:u})}else N.push({role:"assistant",content:typeof n.content=="string"?n.content:""});else if(n.role==="tool"&&typeof n.content=="object"&&"type"in n.content&&n.content.type==="tool_result"){const u={type:"tool_result",tool_use_id:n.content.callId,content:JSON.stringify(n.content.result)};N.push({role:"user",content:[u]})}}const O={model:a.model??o,messages:N,stream:!0,max_tokens:a.maxTokens??4096};w&&(O.system=w),a.temperature!==void 0&&(O.temperature=a.temperature),a.topP!==void 0&&(O.top_p=a.topP),a.stop!==void 0&&(O.stop_sequences=a.stop),a.tools&&a.tools.length>0&&(O.tools=Be(a.tools),a.toolChoice&&(O.tool_choice=qe(a.toolChoice))),P();async function P(){let n="";const u=new Map;let A=0,I="stop";try{let S=function(b,T){switch(b){case"content_block_start":{const _=T.index,L=T.content_block;L?.type==="tool_use"&&u.set(_,{id:L.id??"",name:L.name??"",input:""}),A=_;break}case"content_block_delta":{const _=T.delta;if(_?.type==="text_delta"&&_.text)n+=_.text,j(_.text);else if(_?.type==="input_json_delta"&&_.partial_json){const L=u.get(A);L&&(L.input+=_.partial_json)}break}case"message_delta":{const _=T.delta;_?.stop_reason&&(I=Fe(_.stop_reason));break}case"message_stop":break}};const C=await fetch(`${s}/v1/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":me},body:JSON.stringify(O),signal:E.signal});if(!C.ok){let b;try{b=await C.json()}catch{b={message:C.statusText}}const T=Oe(C,b);$(T);return}if(!C.body){$(B(new Error("No response body")));return}const k=C.body.getReader(),H=new TextDecoder,F=G({onEvent(b){try{const T=JSON.parse(b.data);S(b.event??T.type,T)}catch{}}});for(;;){const{done:b,value:T}=await k.read();if(b)break;const _=H.decode(T,{stream:!0});F.feed(_)}F.end();const D=[];for(const[,b]of u){let T={};try{const _=JSON.parse(b.input);_&&typeof _=="object"&&!Array.isArray(_)&&(T=_)}catch{}D.push({id:b.id,name:b.name,arguments:T})}q({text:n,toolCalls:D,finishReason:I,aborted:!1})}catch(S){if(S instanceof Error&&S.name==="AbortError"){q({text:n,toolCalls:[],finishReason:"stop",aborted:!0});return}$(B(S instanceof Error?S:new Error(String(S))))}}function j(n){for(const u of h)u(n);v?(v({value:n,done:!1}),v=void 0):g.push(n)}function q(n){l=!0,v&&v(U());for(const u of f)u(n);p?.(n)}function $(n){l=!0,y=n,v&&v(U());for(const u of c)u(n);m?.(n)}return{requestId:i,[Symbol.asyncIterator](){return{next(){return y?Promise.reject(y):g.length>0?Promise.resolve({value:g.shift(),done:!1}):l?Promise.resolve(U()):new Promise(n=>{v=n})}}},result(){return R},abort(){E.abort()},onToken(n){return h.add(n),()=>h.delete(n)},onComplete(n){return f.add(n),()=>f.delete(n)},onError(n){return c.add(n),()=>c.delete(n)}}}}}function Be(e){return e.map(t=>({name:t.name,description:t.description,input_schema:t.parameters}))}function qe(e){if(e){if(e==="auto")return{type:"auto"};if(e==="none")return{type:"none"};if(e==="required")return{type:"any"};if(typeof e=="object"&&"name"in e)return{type:"tool",name:e.name}}}function Fe(e){switch(e){case"end_turn":return"stop";case"max_tokens":return"length";case"tool_use":return"tool_calls";case"stop_sequence":return"stop";default:return"stop"}}function je(e){const t=e.model,o=e.baseURL??te,s=e.keepAlive??!0,d=e.timeout;return{getId(){return`ollama:${t}`},supportsTools(){return!0},supportsStreaming(){return!0},getCapabilities(){return{supportsStreaming:!0,supportsTools:!0,supportsVision:!1,supportsFunctions:!0,models:[t]}},generate(a,i){const E=crypto.randomUUID(),h=new AbortController,f=new Set,c=new Set,p=new Set;let m,g;const v=[];let l,y=!1,R;const w=new Promise((u,A)=>{m=u,g=A}),N=a.map(u=>typeof u.content=="string"?{role:u.role,content:u.content}:"type"in u.content&&u.content.type==="tool_calls"?{role:"assistant",content:"",tool_calls:u.content.toolCalls.map(A=>({id:A.id,type:"function",function:{name:A.name,arguments:A.arguments}}))}:"type"in u.content&&u.content.type==="tool_result"?{role:"tool",content:JSON.stringify(u.content.result)}:{role:u.role,content:""}),O={model:i.model??t,messages:N,stream:!0};s!==void 0&&(O.keep_alive=s);const P={};i.temperature!==void 0&&(P.temperature=i.temperature),i.topP!==void 0&&(P.top_p=i.topP),i.maxTokens!==void 0&&(P.num_predict=i.maxTokens),i.stop!==void 0&&(P.stop=i.stop),Object.keys(P).length>0&&(O.options=P),i.tools&&i.tools.length>0&&(O.tools=He(i.tools)),j();async function j(){let u="";const A=[];let I="stop";try{let S=function(b){const T=b.message;if(T.content&&(u+=T.content,q(T.content)),T.tool_calls)for(const _ of T.tool_calls)A.push(Ve(_));b.done&&(b.done_reason==="length"?I="length":A.length>0&&(I="tool_calls"))};const C=setTimeout(()=>{h.abort()},d),k=await fetch(`${o}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O),signal:h.signal});if(clearTimeout(C),!k.ok){let b;try{b=await k.json()}catch{b={error:k.statusText}}const T=re(k,b);n(T);return}if(!k.body){n(B(new Error("No response body")));return}const H=k.body.getReader(),F=new TextDecoder;let D="";for(;;){const{done:b,value:T}=await H.read();if(b)break;D+=F.decode(T,{stream:!0});const _=D.split(`
`);D=_.pop()??"";for(const L of _)if(L.trim())try{const ie=JSON.parse(L);S(ie)}catch{}}if(D.trim())try{const b=JSON.parse(D);S(b)}catch{}$({text:u,toolCalls:A,finishReason:I,aborted:!1})}catch(S){if(S instanceof Error&&S.name==="AbortError"){$({text:u,toolCalls:[],finishReason:"stop",aborted:!0});return}n(B(S instanceof Error?S:new Error(String(S))))}}function q(u){for(const A of f)A(u);l?(l({value:u,done:!1}),l=void 0):v.push(u)}function $(u){y=!0,l&&l(U());for(const A of c)A(u);m?.(u)}function n(u){y=!0,R=u,l&&l(U());for(const A of p)A(u);g?.(u)}return{requestId:E,[Symbol.asyncIterator](){return{next(){return R?Promise.reject(R):v.length>0?Promise.resolve({value:v.shift(),done:!1}):y?Promise.resolve(U()):new Promise(u=>{l=u})}}},result(){return w},abort(){h.abort()},onToken(u){return f.add(u),()=>f.delete(u)},onComplete(u){return c.add(u),()=>c.delete(u)},onError(u){return p.add(u),()=>p.delete(u)}}}}}function He(e){return e.map(t=>({type:"function",function:{name:t.name,description:t.description,parameters:t.parameters}}))}function Ve(e){return{id:e.id??crypto.randomUUID(),name:e.function.name,arguments:e.function.arguments}}function Ke(e={}){const{databaseName:t=Re,storeName:o=Te,ttlMs:s=_e}=e;let d;function a(){return d||(d=new Promise((f,c)=>{const p=indexedDB.open(t,1);p.onerror=()=>{d=void 0,c(new Error(`Failed to open database: ${p.error?.message??"Unknown error"}`))},p.onsuccess=()=>{f(p.result)},p.onupgradeneeded=m=>{const g=m.target.result;g.objectStoreNames.contains(o)||g.createObjectStore(o,{keyPath:"session.id"})}}),d)}async function i(f,c){const p=await a();return new Promise((m,g)=>{const l=p.transaction(o,f).objectStore(o),y=c(l);y.onsuccess=()=>m(y.result),y.onerror=()=>g(new Error(`Transaction failed: ${y.error?.message??"Unknown error"}`))})}function E(f){return Date.now()>=f.expiresAt}async function h(f){await i("readwrite",c=>c.delete(f))}return{async save(f){const c={session:f,expiresAt:Date.now()+s};await i("readwrite",p=>p.put(c))},async load(f){const c=await i("readonly",p=>p.get(f));if(c){if(E(c)){h(f);return}return c.session}},async remove(f){await h(f)},async all(){const f=await a();return new Promise((c,p)=>{const v=f.transaction(o,"readonly").objectStore(o).getAll();v.onsuccess=()=>{const l=Date.now(),y=[];for(const R of v.result){if(l>=R.expiresAt)continue;const{session:w}=R,N=w.messages[0],V=N?.role==="user"&&typeof N.content=="string"?N.content.slice(0,50):void 0;y.push({id:w.id,title:V,messageCount:w.messages.length,createdAt:w.createdAt,updatedAt:w.updatedAt})}c(y)},v.onerror=()=>{p(new Error(`Failed to get all sessions: ${v.error?.message??"Unknown error"}`))}})},async clear(){await i("readwrite",f=>f.clear())}}}const Ge=3e4;function Je(e){const{registry:t,timeout:o=Ge,onError:s,onBeforeExecute:d,onAfterExecute:a}=e;async function i(E){const{id:h,name:f,arguments:c}=E;if(!t.has(f)){const p=new Error(`Tool not found: ${f}`);return s?.(p,E),{callId:h,name:f,success:!1,error:`Tool not found: ${f}`}}d?.(E);try{const p=new Promise((g,v)=>{setTimeout(()=>v(new Error(`Tool execution timed out after ${o}ms`)),o)}),m=await Promise.race([t.execute(f,c),p]);return a?.(E,m),{callId:h,name:f,success:!0,value:m}}catch(p){s?.(p,E);const m=p instanceof Error?p.message:String(p);return{callId:h,name:f,success:!1,error:m}}}return{async execute(E){return i(E)},async executeAll(E){return Promise.all(E.map(h=>i(h)))},hasTool(E){return t.has(E)}}}const We=5,Qe=.7;function ze(e){const{vectorStore:t,name:o,description:s,topK:d=We,minScore:a=Qe,formatResult:i}=e,E={name:o,description:s,parameters:{type:"object",properties:{query:{type:"string",description:"The search query to find relevant documents"}},required:["query"]}};async function h(f){const{query:c}=f,p=await t.search(c,{topK:d,minScore:a});return i?p.map(m=>{const g=i(m);return{...m,content:typeof g=="string"?g:JSON.stringify(g)}}):p}return{schema:E,execute:h}}const x={activeTab:"embeddings",logs:[]};function r(e){const o=`[${new Date().toISOString().split("T")[1]?.split(".")[0]??""}] ${e}`;x.logs=[...x.logs.slice(-49),o],se()}function se(){const e=document.getElementById("log-output");e&&(e.textContent=x.logs.join(`
`),e.scrollTop=e.scrollHeight)}function Xe(){const e=document.getElementById("app");if(!e)throw new Error("App element not found");return e}function ae(){const e=Xe();e.innerHTML=`
<div class="showcase">
  <header class="header">
    <h1>@mikesaintsg/adapters</h1>
    <p class="subtitle">Zero-dependency LLM provider and embedding adapters</p>
  </header>

  <nav class="tabs">
    <button class="tab ${x.activeTab==="embeddings"?"active":""}" data-tab="embeddings">
      üß† Embeddings
    </button>
    <button class="tab ${x.activeTab==="providers"?"active":""}" data-tab="providers">
      üí¨ Providers
    </button>
    <button class="tab ${x.activeTab==="helpers"?"active":""}" data-tab="helpers">
      üîß Helpers
    </button>
    <button class="tab ${x.activeTab==="persistence"?"active":""}" data-tab="persistence">
      üíæ Persistence
    </button>
    <button class="tab ${x.activeTab==="bridges"?"active":""}" data-tab="bridges">
      üåâ Bridges
    </button>
  </nav>

  <main class="content">
    ${Ye()}
  </main>

  <section class="log-section">
    <h3>üìã Activity Log</h3>
    <pre id="log-output" class="log-output">${x.logs.join(`
`)}</pre>
    <button id="clear-logs" class="btn btn-secondary">Clear Logs</button>
  </section>

  <footer>
    <p>Built with TypeScript ‚Ä¢ Zero Dependencies ‚Ä¢ Browser + Node.js</p>
  </footer>
</div>
`,nt()}function Ye(){switch(x.activeTab){case"embeddings":return Ze();case"providers":return et();case"helpers":return tt();case"persistence":return rt();case"bridges":return ot();default:return""}}function Ze(){return`
    <section class="demo-section">
      <h2>üß† Embedding Adapters</h2>
      <p class="description">
        Generate vector embeddings from text using various providers.
        Adapters support batching, caching, and composition.
      </p>

      <div class="demo-grid">
        <div class="demo-card">
          <h3>OpenAI Embeddings</h3>
          <p>text-embedding-3-small/large with dimension reduction</p>
          <button id="demo-openai-embed" class="btn btn-primary">Test Factory</button>
        </div>

        <div class="demo-card">
          <h3>Voyage AI Embeddings</h3>
          <p>voyage-3, voyage-3-lite, voyage-code-3 with input types</p>
          <button id="demo-voyage-embed" class="btn btn-primary">Test Factory</button>
        </div>

        <div class="demo-card">
          <h3>Ollama Embeddings</h3>
          <p>Local embeddings for development (nomic-embed-text, mxbai)</p>
          <button id="demo-ollama-embed" class="btn btn-primary">Test Factory</button>
        </div>

        <div class="demo-card">
          <h3>Wrapper Composition</h3>
          <p>Batched + Cached + Base adapter composition</p>
          <button id="demo-wrapper-embed" class="btn btn-primary">Test Composition</button>
        </div>
      </div>
    </section>
  `}function et(){return`
    <section class="demo-section">
      <h2>üí¨ Provider Adapters</h2>
      <p class="description">
        Connect to LLM providers for chat completions with streaming support.
        Each adapter handles provider-specific SSE formats and tool calling.
      </p>

      <div class="demo-grid">
        <div class="demo-card">
          <h3>OpenAI Provider</h3>
          <p>GPT-4o, GPT-4, GPT-3.5-turbo with streaming and tools</p>
          <button id="demo-openai-provider" class="btn btn-primary">Test Factory</button>
        </div>

        <div class="demo-card">
          <h3>Anthropic Provider</h3>
          <p>Claude 3.5 Sonnet, Claude 3 Opus/Haiku with tool use</p>
          <button id="demo-anthropic-provider" class="btn btn-primary">Test Factory</button>
        </div>

        <div class="demo-card">
          <h3>Ollama Provider</h3>
          <p>Local LLMs (Llama 2/3, Mistral, CodeLlama) for development</p>
          <button id="demo-ollama-provider" class="btn btn-primary">Test Factory</button>
        </div>
      </div>
    </section>
  `}function tt(){return`
    <section class="demo-section">
      <h2>üîß Helper Utilities</h2>
      <p class="description">
        Core utilities shared across adapters: SSE parsing, rate limiting,
        error mapping, and retry logic.
      </p>

      <div class="demo-grid">
        <div class="demo-card">
          <h3>Rate Limiter</h3>
          <p>Sliding window with concurrent request limiting</p>
          <button id="demo-rate-limiter" class="btn btn-primary">Test Rate Limiter</button>
        </div>

        <div class="demo-card">
          <h3>SSE Parser</h3>
          <p>Stateful parser for chunked SSE streams</p>
          <button id="demo-sse-parser" class="btn btn-primary">Test SSE Parser</button>
        </div>

        <div class="demo-card">
          <h3>Adapter Errors</h3>
          <p>Typed errors with provider codes and retry info</p>
          <button id="demo-errors" class="btn btn-primary">Test Error Handling</button>
        </div>
      </div>
    </section>
  `}function rt(){return`
    <section class="demo-section">
      <h2>üíæ Persistence Adapters</h2>
      <p class="description">
        Store sessions and vectors in browser storage.
        Supports IndexedDB, OPFS, and HTTP backends.
      </p>

      <div class="demo-grid">
        <div class="demo-card">
          <h3>Session Persistence</h3>
          <p>IndexedDB storage with TTL expiration</p>
          <button id="demo-session-persistence" class="btn btn-primary">Test Session Storage</button>
        </div>

        <div class="demo-card">
          <h3>VectorStore Persistence</h3>
          <p>IndexedDB, OPFS, and HTTP backends</p>
          <button id="demo-vector-persistence" class="btn btn-primary">Test Factories</button>
        </div>
      </div>
    </section>
  `}function ot(){return`
    <section class="demo-section">
      <h2>üåâ Bridge Functions</h2>
      <p class="description">
        Connect inference tool calls to execution and vector retrieval.
        Provides lifecycle hooks and timeout handling.
      </p>

      <div class="demo-grid">
        <div class="demo-card">
          <h3>Tool Call Bridge</h3>
          <p>Connect inference to contextprotocol execution</p>
          <button id="demo-tool-bridge" class="btn btn-primary">Test Tool Bridge</button>
        </div>

        <div class="demo-card">
          <h3>Retrieval Tool</h3>
          <p>Create VectorStore query tools</p>
          <button id="demo-retrieval-tool" class="btn btn-primary">Test Retrieval Tool</button>
        </div>
      </div>
    </section>
  `}function nt(){document.querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",t=>{const s=t.target.dataset.tab;s&&(x.activeTab=s,ae())})}),document.getElementById("clear-logs")?.addEventListener("click",()=>{x.logs=[],se()}),document.getElementById("demo-openai-embed")?.addEventListener("click",st),document.getElementById("demo-voyage-embed")?.addEventListener("click",at),document.getElementById("demo-ollama-embed")?.addEventListener("click",it),document.getElementById("demo-wrapper-embed")?.addEventListener("click",ct),document.getElementById("demo-openai-provider")?.addEventListener("click",dt),document.getElementById("demo-anthropic-provider")?.addEventListener("click",lt),document.getElementById("demo-ollama-provider")?.addEventListener("click",ut),document.getElementById("demo-rate-limiter")?.addEventListener("click",()=>{pt()}),document.getElementById("demo-sse-parser")?.addEventListener("click",mt),document.getElementById("demo-errors")?.addEventListener("click",ft),document.getElementById("demo-session-persistence")?.addEventListener("click",()=>{Et()}),document.getElementById("demo-vector-persistence")?.addEventListener("click",ht),document.getElementById("demo-tool-bridge")?.addEventListener("click",gt),document.getElementById("demo-retrieval-tool")?.addEventListener("click",yt)}function st(){r("üì¶ Creating OpenAI embedding adapter...");try{const e=ne({apiKey:"demo-api-key",model:"text-embedding-3-small",dimensions:1536});r("‚úÖ OpenAI embedding adapter created successfully"),r(`   Model: ${e.getModelMetadata().model}`),r(`   Dimensions: ${e.getModelMetadata().dimensions}`),r(`   Provider: ${e.getModelMetadata().provider}`)}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function at(){r("üì¶ Creating Voyage embedding adapter...");try{const e=Ne({apiKey:"demo-api-key",model:"voyage-3",inputType:"document"});r("‚úÖ Voyage embedding adapter created successfully"),r(`   Model: ${e.getModelMetadata().model}`),r(`   Dimensions: ${e.getModelMetadata().dimensions}`),r(`   Provider: ${e.getModelMetadata().provider}`)}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function it(){r("üì¶ Creating Ollama embedding adapter...");try{const e=Ce({model:"nomic-embed-text",baseURL:"http://localhost:11434",timeout:3e4});r("‚úÖ Ollama embedding adapter created successfully"),r(`   Model: ${e.getModelMetadata().model}`),r(`   Provider: ${e.getModelMetadata().provider}`),r("   Note: Requires local Ollama server")}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function ct(){r("üì¶ Creating composed embedding adapter...");try{const e=ne({apiKey:"demo-api-key",model:"text-embedding-3-small"});r("   ‚úÖ Base adapter created");const t=Me({adapter:e,batchSize:100,delayMs:50,deduplicate:!0});r("   ‚úÖ Batched wrapper added (batchSize: 100)");const s=xe({adapter:t,cache:new Map,ttlMs:36e5});r("   ‚úÖ Cache wrapper added (TTL: 1 hour)"),r("‚úÖ Composed adapter ready: Cached ‚Üí Batched ‚Üí OpenAI"),r(`   Final model: ${s.getModelMetadata().model}`)}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function dt(){r("üì¶ Creating OpenAI provider adapter...");try{const e=De({apiKey:"demo-api-key",model:"gpt-4o",defaultOptions:{temperature:.7,maxTokens:1e3}});r("‚úÖ OpenAI provider adapter created successfully");const t=e.getCapabilities();r(`   Models: ${t.models.join(", ")}`),r(`   Supports streaming: ${t.supportsStreaming}`),r(`   Supports tools: ${t.supportsTools}`)}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function lt(){r("üì¶ Creating Anthropic provider adapter...");try{const e=Ue({apiKey:"demo-api-key",model:"claude-3-5-sonnet-20241022"});r("‚úÖ Anthropic provider adapter created successfully");const t=e.getCapabilities();r(`   Models: ${t.models.join(", ")}`),r(`   Supports streaming: ${t.supportsStreaming}`),r(`   Supports tools: ${t.supportsTools}`)}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function ut(){r("üì¶ Creating Ollama provider adapter...");try{const e=je({model:"llama3",baseURL:"http://localhost:11434",keepAlive:!0,timeout:12e4});r("‚úÖ Ollama provider adapter created successfully");const t=e.getCapabilities();r(`   Models: ${t.models.join(", ")}`),r(`   Supports streaming: ${t.supportsStreaming}`),r("   Note: Requires local Ollama server")}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}async function pt(){r("üì¶ Creating rate limiter...");try{const e=Ae({requestsPerMinute:60,maxConcurrent:5,windowMs:6e4});r("‚úÖ Rate limiter created");const t=e.getState();r(`   Requests per minute: ${t.requestsPerMinute}`),r(`   Max concurrent: ${t.maxConcurrent}`),r(`   Active requests: ${t.activeRequests}`),r("‚è≥ Acquiring slot..."),await e.acquire(),r("‚úÖ Slot acquired");const o=e.getState();r(`   Active requests: ${o.activeRequests}`),r(`   Requests in window: ${o.requestsInWindow}`),e.release(),r("‚úÖ Slot released");const s=e.getState();r(`   Active requests: ${s.activeRequests}`)}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function mt(){r("üì¶ Creating SSE parser...");try{const e=[],t=G({onEvent:o=>{e.push(o),r(`   Event received: ${o.data.substring(0,50)}...`)},onError:o=>{r(`   Parse error: ${o.message}`)},onEnd:()=>{r("   Stream ended")}});r("‚úÖ SSE parser created"),r("üì° Feeding sample SSE data..."),t.feed(`event: message
`),t.feed(`data: {"content":"Hello"}
`),t.feed(`
`),t.feed(`data: {"content":"World"}
`),t.feed(`
`),t.feed(`data: [DONE]
`),t.feed(`
`),t.end(),r(`‚úÖ Parsed ${e.length} events`)}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function ft(){r("üì¶ Demonstrating error handling...");try{const e=new M("AUTHENTICATION_ERROR","Invalid API key",{providerCode:"401"});r(`‚úÖ Auth error: ${e.code}`),r(`   Message: ${e.message}`),r(`   Provider code: ${e.providerCode}`);const t=new M("RATE_LIMIT_ERROR","Too many requests",{retryAfter:5e3,providerCode:"429"});r(`‚úÖ Rate limit error: ${t.code}`),r(`   Retry after: ${t.retryAfter}ms`),r(`   isAdapterError(authError): ${z(e)}`),r(`   isAdapterError(new Error()): ${z(new Error)}`)}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}async function Et(){r("üì¶ Creating session persistence adapter...");try{const e=Ke({databaseName:"adapters-demo-sessions",storeName:"sessions",ttlMs:6048e5});r("‚úÖ Session persistence adapter created");const t=Date.now(),o={id:`demo-session-${t}`,system:void 0,messages:[{id:"msg-1",role:"user",content:"Hello!",createdAt:t},{id:"msg-2",role:"assistant",content:"Hi there!",createdAt:t+1}],createdAt:t,updatedAt:t};r("üíæ Saving session..."),await e.save(o),r(`‚úÖ Session saved: ${o.id}`),r("üìÇ Loading session...");const s=await e.load(o.id);s&&(r(`‚úÖ Session loaded: ${s.id}`),r(`   Messages: ${s.messages.length}`)),r("üìã Listing sessions...");const d=await e.all();r(`‚úÖ Total sessions: ${d.length}`),await e.remove(o.id),r("üóëÔ∏è Test session removed")}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function ht(){r("üì¶ VectorStore persistence factories available:"),r("   ‚Ä¢ createIndexedDBVectorStorePersistence() - Browser IndexedDB"),r("   ‚Ä¢ createOPFSVectorStorePersistence() - Origin Private File System"),r("   ‚Ä¢ createHTTPVectorStorePersistence() - Remote HTTP API"),r("‚úÖ All factories exported and ready for use")}function gt(){r("üì¶ Creating tool call bridge...");try{const t=Je({registry:{getSchemas:()=>[{name:"get_weather",description:"Get weather for a location",parameters:{type:"object",properties:{location:{type:"string",description:"City name"}},required:["location"]}}],execute:(o,s)=>(r(`   Tool executed: ${o}(${JSON.stringify(s)})`),Promise.resolve({temperature:72,conditions:"sunny"})),has:o=>o==="get_weather"},timeout:3e4,onBeforeExecute:o=>{r(`   üîß Before: ${o.name}`)},onAfterExecute:(o,s)=>{r(`   ‚úÖ After: ${o.name} ‚Üí ${JSON.stringify(s)}`)},onError:(o,s)=>{r(`   ‚ùå Error in ${s.name}: ${String(o)}`)}});r("‚úÖ Tool call bridge created"),r(`   hasTool('get_weather'): ${t.hasTool("get_weather")}`),r(`   hasTool('unknown'): ${t.hasTool("unknown")}`),r("üîß Executing tool call..."),t.execute({id:"call_1",name:"get_weather",arguments:{location:"San Francisco"}}).then(o=>{r(`‚úÖ Tool result: success=${o.success}, value=${JSON.stringify(o.value)}`)}).catch(o=>{r(`‚ùå Tool error: ${o instanceof Error?o.message:String(o)}`)})}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}function yt(){r("üì¶ Creating retrieval tool...");try{const t=ze({vectorStore:{search:(o,s)=>{r(`   Searching for: "${o}" (topK: ${s?.topK??5})`);const d=[{id:"doc1",content:"TypeScript is great",score:.95},{id:"doc2",content:"JavaScript runtime",score:.85}];return Promise.resolve(d)}},name:"search_docs",description:"Search documentation for relevant information",topK:5,minScore:.7});r("‚úÖ Retrieval tool created"),r(`   Tool name: ${t.schema.name}`),r(`   Description: ${t.schema.description}`),r("üîç Executing search..."),t.execute({query:"TypeScript"}).then(o=>{r(`‚úÖ Found ${o.length} results`),o.forEach(s=>{r(`   ‚Ä¢ ${s.id}: ${s.content.substring(0,30)}... (score: ${s.score.toFixed(2)})`)})}).catch(o=>{r(`‚ùå Search error: ${o instanceof Error?o.message:String(o)}`)})}catch(e){r(`‚ùå Error: ${e instanceof Error?e.message:String(e)}`)}}ae();r("üöÄ @mikesaintsg/adapters showcase loaded");</script>
  <style rel="stylesheet" crossorigin>*{box-sizing:border-box;margin:0;padding:0}:root{--primary: #6366f1;--primary-dark: #4f46e5;--danger: #ef4444;--danger-dark: #dc2626;--secondary: #6b7280;--secondary-dark: #4b5563;--bg: #0f172a;--bg-light: #1e293b;--bg-lighter: #334155;--text: #f8fafc;--text-muted: #94a3b8;--border: #475569;--user-bg: #3b82f6;--assistant-bg: #1e293b;--system-bg: #164e63}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,sans-serif;background-color:var(--bg);color:var(--text);line-height:1.6;min-height:100vh}.container{max-width:900px;margin:0 auto;padding:2rem 1rem;display:flex;flex-direction:column;gap:1.5rem}.header{text-align:center;padding:1rem 0}.header h1{font-size:2rem;font-weight:700;background:linear-gradient(135deg,var(--primary) 0%,#a855f7 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.subtitle{color:var(--text-muted);font-size:1rem;margin-top:.5rem}.stats-bar{display:flex;justify-content:center;gap:2rem;padding:1rem;background:var(--bg-light);border-radius:.75rem;border:1px solid var(--border)}.stat{display:flex;flex-direction:column;align-items:center;gap:.25rem}.stat-label{font-size:.75rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.05em}.stat-value{font-size:1.25rem;font-weight:600;color:var(--primary)}.stat-value.session-id{font-size:.875rem;font-family:monospace}.chat-container{background:var(--bg-light);border-radius:.75rem;border:1px solid var(--border);overflow:hidden}.chat-messages{min-height:300px;max-height:400px;overflow-y:auto;padding:1rem;display:flex;flex-direction:column;gap:1rem}.message{padding:.75rem 1rem;border-radius:.75rem;max-width:85%}.message-role{font-size:.75rem;font-weight:600;margin-bottom:.25rem;text-transform:uppercase;letter-spacing:.05em}.message-content{font-size:.9375rem;word-wrap:break-word}.user-message{align-self:flex-end;background:var(--user-bg)}.user-message .message-role{color:#ffffffb3}.assistant-message{align-self:flex-start;background:var(--assistant-bg);border:1px solid var(--border)}.assistant-message .message-role{color:var(--primary)}.system-message{align-self:center;background:var(--system-bg);max-width:100%;text-align:center;border:1px solid rgba(6,182,212,.3)}.system-message .message-role{color:#22d3ee}.streaming .message-content{min-height:1.5em}.cursor{animation:blink 1s infinite;color:var(--primary)}@keyframes blink{0%,50%{opacity:1}51%,to{opacity:0}}.aborted-label{color:var(--danger);font-size:.75rem;font-style:italic}.error-text{color:var(--danger)}.input-container{display:flex;flex-direction:column;gap:.75rem}.input-container textarea{width:100%;padding:.875rem 1rem;background:var(--bg-light);border:1px solid var(--border);border-radius:.75rem;color:var(--text);font-size:1rem;font-family:inherit;resize:none;transition:border-color .2s}.input-container textarea:focus{outline:none;border-color:var(--primary)}.input-container textarea::placeholder{color:var(--text-muted)}.input-actions{display:flex;gap:.5rem}.btn{padding:.625rem 1.25rem;border:none;border-radius:.5rem;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s}.btn:disabled{opacity:.5;cursor:not-allowed}.btn-primary{background:var(--primary);color:#fff}.btn-primary:hover:not(:disabled){background:var(--primary-dark)}.btn-danger{background:var(--danger);color:#fff}.btn-danger:hover:not(:disabled){background:var(--danger-dark)}.btn-secondary{background:var(--secondary);color:#fff}.btn-secondary:hover:not(:disabled){background:var(--secondary-dark)}.features-section{margin-top:1rem}.features-section h2{text-align:center;font-size:1.25rem;margin-bottom:1rem;color:var(--text-muted)}.feature-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem}.feature-card{background:var(--bg-light);border:1px solid var(--border);border-radius:.75rem;padding:1.25rem;text-align:center}.feature-card h3{font-size:1.125rem;margin-bottom:.5rem}.feature-card p{font-size:.875rem;color:var(--text-muted)}.chat-messages::-webkit-scrollbar{width:6px}.chat-messages::-webkit-scrollbar-track{background:var(--bg-light)}.chat-messages::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}.chat-messages::-webkit-scrollbar-thumb:hover{background:var(--secondary)}.showcase{max-width:1000px;margin:0 auto;padding:2rem 1rem;display:flex;flex-direction:column;gap:1.5rem}.tabs{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center;background:var(--bg-light);padding:.75rem;border-radius:.75rem;border:1px solid var(--border)}.tab{padding:.5rem 1rem;background:transparent;border:1px solid transparent;border-radius:.5rem;color:var(--text-muted);font-size:.875rem;cursor:pointer;transition:all .2s}.tab:hover{color:var(--text);background:var(--bg-lighter)}.tab.active{background:var(--primary);color:#fff;border-color:var(--primary)}.demo-section{background:var(--bg-light);border-radius:.75rem;border:1px solid var(--border);padding:1.5rem}.demo-section h2{font-size:1.5rem;margin-bottom:.5rem}.demo-section .description{color:var(--text-muted);margin-bottom:1.5rem}.demo-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.demo-card{background:var(--bg);border:1px solid var(--border);border-radius:.75rem;padding:1.25rem}.demo-card h3{font-size:1.125rem;margin-bottom:.5rem;color:var(--primary)}.demo-card p{font-size:.875rem;color:var(--text-muted);margin-bottom:1rem;min-height:2.5rem}.log-section{background:var(--bg-light);border-radius:.75rem;border:1px solid var(--border);padding:1rem}.log-section h3{font-size:1rem;margin-bottom:.75rem;color:var(--text-muted)}.log-output{background:var(--bg);border:1px solid var(--border);border-radius:.5rem;padding:1rem;font-family:Fira Code,Consolas,monospace;font-size:.8125rem;line-height:1.5;max-height:200px;overflow-y:auto;white-space:pre-wrap;word-break:break-all;margin-bottom:.75rem;color:var(--text)}footer{text-align:center;padding:1rem 0;color:var(--text-muted);font-size:.875rem}@media(max-width:640px){.container{padding:1rem}.header h1{font-size:1.5rem}.stats-bar{gap:1rem;flex-wrap:wrap}.chat-messages{min-height:250px}.message{max-width:95%}.tabs{flex-direction:column}.tab{width:100%;text-align:center}}</style>
</head>
<body>
<div id="app"></div>
</body>
</html>
